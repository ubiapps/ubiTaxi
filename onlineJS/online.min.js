(function(a){a.internetConnection=a.internetConnection||{},a.internetConnection.addEvent=function(a,b,c){window.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c)};var b=new XMLHttpRequest;a.internetConnection.isXMLHttp=function(){return"withCredentials"in b},a.internetConnection.isXDomain=function(){return typeof XDomainRequest!="undefined"},a.internetConnection.XDomainLogic={init:function(){b=new XDomainRequest,b.onerror=function(){b.status=404,a.internetConnection.processXmlhttpStatus()},b.ontimeout=function(){b.status=404,a.internetConnection.processXmlhttpStatus()}},onInternetAsyncStatus:function(){try{b.status=200,a.internetConnection.processXmlhttpStatus()}catch(c){a.internetConnection.fireHandlerDependOnStatus(!1),a.onLine=!1}},checkConnectionWithRequest:function(c){b.onload=a.internetConnection.logic.onInternetAsyncStatus;var d=a.onLineCheckURL();b.open("GET",d),b.send()}},a.internetConnection.XMLHttpLogic={init:function(){},onInternetAsyncStatus:function(){if(b.readyState===4)try{a.internetConnection.processXmlhttpStatus()}catch(c){a.internetConnection.fireHandlerDependOnStatus(!1),a.onLine=!1}},checkConnectionWithRequest:function(c){c?b.onreadystatechange=a.internetConnection.logic.onInternetAsyncStatus:b.onreadystatechange=undefined;var d=a.onLineCheckURL();b.open("HEAD",d,c),b.send();if(c===!1)return a.internetConnection.processXmlhttpStatus(),a.onLine}},a.internetConnection.isXDomain()?a.internetConnection.logic=a.internetConnection.XDomainLogic:a.internetConnection.logic=a.internetConnection.XMLHttpLogic,a.internetConnection.logic.init(),a.internetConnection.processXmlhttpStatus=function(){var c=a.internetConnection.verifyStatus(b.status);a.internetConnection.fireHandlerDependOnStatus(c),a.onLine=c},a.internetConnection.verifyStatus=function(a){return a>=200&&a<300||a===304},a.internetConnection.fireHandlerDependOnStatus=function(b){b===!0&&a.onLineHandler!==undefined&&(a.onLine!==!0||a.internetConnection.handlerFired===!1)&&a.onLineHandler(),b===!1&&a.offLineHandler!==undefined&&(a.onLine!==!1||a.internetConnection.handlerFired===!1)&&a.offLineHandler(),a.internetConnection.handlerFired=!0},a.internetConnection.startCheck=function(){setInterval("window.internetConnection.logic.checkConnectionWithRequest(true)",a.onLineCheckTimeout)},a.internetConnection.stopCheck=function(){clearInterval("window.internetConnection.logic.checkConnectionWithRequest(true)",a.onLineCheckTimeout)},a.checkOnLine=function(){a.internetConnection.logic.checkConnectionWithRequest(!1)},a.onLineCheckURL=function(){return"http://offlinejs.com/online.php?r="+Math.random()},a.onLineCheckTimeout=5e3,a.checkOnLine(),a.internetConnection.startCheck(),a.internetConnection.handlerFired=!1,a.internetConnection.addEvent(a,"load",function(){a.internetConnection.fireHandlerDependOnStatus(a.onLine)}),a.internetConnection.addEvent(a,"online",function(){window.internetConnection.logic.checkConnectionWithRequest(!0)}),a.internetConnection.addEvent(a,"offline",function(){window.internetConnection.logic.checkConnectionWithRequest(!0)})})(window);